<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëª¨ì•„ë§ˆì¼“ - ì¤‘ê³  ê±°ë˜ í†µí•© ê²€ìƒ‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');

        body {
            font-family: 'Noto Sans KR', sans-serif;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 40vh;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }

        .nav-btn-active {
            background-color: #3B82F6;
            color: white;
        }

        .nav-btn {
            transition: all 0.3s ease;
        }

        .keyword-btn,
        .category-btn {
            transition: background-color 0.2s ease-in-out;
        }

        .category-btn-active {
            background-color: #3B82F6;
            color: white;
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800">

    <!-- 
    Chosen Palette: Calm Neutrals (Grays, Blue accent)
    Application Structure Plan: A tab-based SPA structure is used to separate user tasks. 'í†µí•© ê²€ìƒ‰' is for focused searching. The new 'ë‘˜ëŸ¬ë³´ê¸°' tab is for exploratory browsing by category. 'ì‹œì„¸ ë¶„ì„' is for market research. This aligns the UI with distinct user intents, improving usability.
    Visualization & Content Choices: 
    - í†µí•© ê²€ìƒ‰: Goal: Inform/Compare. Method: Dynamic card list via HTML/JS. Interaction: Keyword search and advanced filters (price, date, status, platform). Justification: For users with a specific item in mind.
    - ë‘˜ëŸ¬ë³´ê¸°: Goal: Explore. Method: Dynamic card list. Interaction: Category filter buttons. Justification: For users who want to browse items without a specific goal.
    - ì‹œì„¸ ë¶„ì„: Goal: Show Change/Compare. Method: Line/Bar Charts (Chart.js/Canvas). Interaction: Search triggers chart update. Justification: For users researching market prices.
    CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. 
    -->

    <div id="app" class="min-h-screen flex flex-col">

        <header class="bg-white shadow-md sticky top-0 z-20">
            <div class="container mx-auto px-4 py-4 flex justify-between items-center">
                <h1 class="text-2xl font-bold text-blue-600">ëª¨ì•„ë§ˆì¼“ ğŸ“ˆ</h1>
                <nav class="hidden md:flex space-x-2">
                    <button data-view="search"
                        class="nav-btn px-4 py-2 rounded-md font-semibold text-gray-600 hover:bg-blue-100">í†µí•©
                        ê²€ìƒ‰</button>
                    <button data-view="browse"
                        class="nav-btn px-4 py-2 rounded-md font-semibold text-gray-600 hover:bg-blue-100">ë‘˜ëŸ¬ë³´ê¸°</button>
                    <button data-view="analysis"
                        class="nav-btn px-4 py-2 rounded-md font-semibold text-gray-600 hover:bg-blue-100">ì‹œì„¸
                        ë¶„ì„</button>
                </nav>
            </div>
        </header>

        <main class="flex-grow container mx-auto p-4 md:p-8">

            <div id="view-search" class="view-content">
                <div class="bg-white p-6 rounded-lg shadow-sm mb-6">
                    <h2 class="text-2xl font-bold mb-1">ì¤‘ê³  ë§¤ë¬¼ í†µí•© ê²€ìƒ‰</h2>
                    <p class="text-gray-600 mb-4">ì°¾ê³  ìˆëŠ” íŠ¹ì • ìƒí’ˆì˜ ì´ë¦„ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”.</p>
                    <div class="flex flex-col sm:flex-row gap-2">
                        <input id="searchInput" type="text" placeholder="ì˜ˆ: RTX 4080"
                            class="flex-grow p-3 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none">
                        <button id="searchBtn"
                            class="bg-blue-600 text-white font-bold py-3 px-6 rounded-md hover:bg-blue-700 transition">ê²€ìƒ‰</button>
                    </div>
                    <div id="popular-keywords" class="mt-4 flex items-center gap-2 flex-wrap">
                        <span class="text-sm font-semibold text-gray-600">ì¸ê¸° ê²€ìƒ‰ì–´:</span>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-sm mb-6">
                    <h3 class="text-lg font-bold mb-4">ìƒì„¸ í•„í„°</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ê°€ê²© ë²”ìœ„ (ì›)</label>
                            <div class="flex items-center gap-2">
                                <input type="number" id="minPrice" placeholder="ìµœì†Œ"
                                    class="w-full p-2 border rounded-md">
                                <span class="text-gray-500">-</span>
                                <input type="number" id="maxPrice" placeholder="ìµœëŒ€"
                                    class="w-full p-2 border rounded-md">
                            </div>
                        </div>
                        <div>
                            <label for="dateFilter" class="block text-sm font-medium text-gray-700 mb-1">í¬ìŠ¤íŒ… ë‚ ì§œ</label>
                            <select id="dateFilter" class="w-full p-2 border rounded-md bg-white">
                                <option value="all">ì „ì²´ ê¸°ê°„</option>
                                <option value="1">í•˜ë£¨ ì´ë‚´</option>
                                <option value="7">ì¼ì£¼ì¼ ì´ë‚´</option>
                                <option value="30">í•œë‹¬ ì´ë‚´</option>
                            </select>
                        </div>
                        <div class="relative">
                            <label class="block text-sm font-medium text-gray-700 mb-1">ê±°ë˜ í”Œë«í¼</label>
                            <button id="platformFilterBtn"
                                class="w-full p-2 border rounded-md bg-white text-left flex justify-between items-center">
                                <span id="platformFilterText">ì „ì²´</span>
                                <span>â–¼</span>
                            </button>
                            <div id="platformFilterOptions"
                                class="hidden absolute z-10 w-full mt-1 bg-white border rounded-md shadow-lg p-4 space-y-2">
                                <label class="flex items-center gap-2"><input type="checkbox" name="platform"
                                        value="ì¤‘ê³ ë‚˜ë¼" class="h-4 w-4 text-blue-600" checked><span>ì¤‘ê³ ë‚˜ë¼</span></label>
                                <label class="flex items-center gap-2"><input type="checkbox" name="platform"
                                        value="ë²ˆê°œì¥í„°" class="h-4 w-4 text-blue-600" checked><span>ë²ˆê°œì¥í„°</span></label>
                                <label class="flex items-center gap-2"><input type="checkbox" name="platform"
                                        value="ë‹¹ê·¼ë§ˆì¼“" class="h-4 w-4 text-blue-600" checked><span>ë‹¹ê·¼ë§ˆì¼“</span></label>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ê±°ë˜ ìƒíƒœ</label>
                            <div class="flex items-center gap-x-4 pt-2" id="statusFilterContainer">
                                <label class="flex items-center gap-1 cursor-pointer"><input type="radio"
                                        name="statusFilter" value="all" class="h-4 w-4 text-blue-600" checked><span
                                        class="text-sm">ì „ì²´</span></label>
                                <label class="flex items-center gap-1 cursor-pointer"><input type="radio"
                                        name="statusFilter" value="available" class="h-4 w-4 text-blue-600"><span
                                        class="text-sm">ê±°ë˜ ê°€ëŠ¥</span></label>
                                <label class="flex items-center gap-1 cursor-pointer"><input type="radio"
                                        name="statusFilter" value="sold" class="h-4 w-4 text-blue-600"><span
                                        class="text-sm">ê±°ë˜ ì™„ë£Œ</span></label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex justify-end items-center mb-4">
                    <span class="text-sm font-medium text-gray-600 mr-2">ì •ë ¬:</span>
                    <select id="sortOptions" class="border rounded-md p-2 bg-white">
                        <option value="latest">ìµœì‹ ìˆœ</option>
                        <option value="price_asc">ê°€ê²© ë‚®ì€ ìˆœ</option>
                        <option value="price_desc">ê°€ê²© ë†’ì€ ìˆœ</option>
                    </select>
                </div>

                <div id="results-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                </div>
                <p id="no-results" class="text-center text-gray-500 py-10 hidden">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”.</p>
            </div>

            <div id="view-browse" class="view-content hidden">
                <div class="bg-white p-6 rounded-lg shadow-sm mb-6">
                    <h2 class="text-2xl font-bold mb-1">ì¹´í…Œê³ ë¦¬ ë‘˜ëŸ¬ë³´ê¸°</h2>
                    <p class="text-gray-600 mb-4">ê´€ì‹¬ìˆëŠ” ë¶„ì•¼ì˜ ì¤‘ê³  ë¬¼í’ˆë“¤ì„ í™•ì¸í•´ë³´ì„¸ìš”.</p>
                    <div id="category-filters" class="flex items-center gap-2 flex-wrap">
                    </div>
                </div>
                <div id="browse-results-container"
                    class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>
                <p id="no-browse-results" class="text-center text-gray-500 py-10 hidden">í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì— ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>
            </div>

            <div id="view-analysis" class="view-content hidden">
                <div class="bg-white p-6 rounded-lg shadow-sm mb-6">
                    <h2 class="text-2xl font-bold mb-1">ì œí’ˆ ì‹œì„¸ ë¶„ì„</h2>
                    <p class="text-gray-600 mb-4">íŒë§¤í•˜ë ¤ëŠ” ì œí’ˆì˜ í˜„ì¬ ì‹œì„¸ì™€ ê³¼ê±° ì¶”ì´, ê°€ê²©ëŒ€ë³„ íŒë§¤ ì†ë„ë¥¼ ë¶„ì„í•˜ì—¬ í•©ë¦¬ì ì¸ íŒë§¤ê°€ë¥¼ ì±…ì •í•˜ì„¸ìš”.</p>
                    <div class="flex flex-col sm:flex-row gap-2">
                        <input id="analysisInput" type="text" placeholder="ë¶„ì„í•  ì œí’ˆëª… ì…ë ¥ (ì˜ˆ: ì•„ì´íŒ¨ë“œ ì—ì–´ 5)"
                            class="flex-grow p-3 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none">
                        <button id="analysisBtn"
                            class="bg-blue-600 text-white font-bold py-3 px-6 rounded-md hover:bg-blue-700 transition">ë¶„ì„í•˜ê¸°</button>
                    </div>
                </div>

                <div id="analysis-results" class="hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
                        <div class="lg:col-span-3 bg-white p-6 rounded-lg shadow-sm">
                            <h3 class="text-xl font-bold mb-4">ì›”ë³„ í‰ê·  ì‹œì„¸ ì¶”ì´</h3>
                            <div class="chart-container">
                                <canvas id="priceTrendChart"></canvas>
                            </div>
                        </div>
                        <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-sm flex flex-col">
                            <h3 class="text-xl font-bold mb-4">í•µì‹¬ ì •ë³´</h3>
                            <div id="price-summary"
                                class="space-y-4 text-center flex-grow flex flex-col justify-center">
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-xl font-bold mb-4">ê°€ê²©ëŒ€ë³„ í‰ê·  íŒë§¤ ì†Œìš” ê¸°ê°„</h3>
                        <div class="chart-container">
                            <canvas id="salesSpeedChart"></canvas>
                        </div>
                    </div>
                </div>
                <p id="no-analysis-results" class="text-center text-gray-500 py-10">ë¶„ì„í•  ì œí’ˆì„ ê²€ìƒ‰í•´ì£¼ì„¸ìš”.</p>
            </div>

        </main>

        <footer class="bg-white mt-8 py-4 border-t">
            <div class="container mx-auto px-4 text-center text-gray-500">
                <p>&copy; 2025 ëª¨ì•„ë§ˆì¼“. All rights reserved.</p>
                <p class="text-sm">ë³¸ ì‚¬ì´íŠ¸ëŠ” ì‹¤ì œ ê±°ë˜ë¥¼ ì¤‘ê°œí•˜ì§€ ì•Šìœ¼ë©°, ì •ë³´ ì œê³µì„ ëª©ì ìœ¼ë¡œ í•©ë‹ˆë‹¤.</p>
            </div>
        </footer>

        <nav class="md:hidden fixed bottom-0 left-0 right-0 bg-white shadow-t-md z-20 flex justify-around border-t">
            <button data-view="search" class="flex-1 nav-btn p-3 text-center text-gray-600">
                <span class="text-2xl">ğŸ”</span>
                <span class="text-xs block">í†µí•©ê²€ìƒ‰</span>
            </button>
            <button data-view="browse" class="flex-1 nav-btn p-3 text-center text-gray-600">
                <span class="text-2xl">ğŸ›ï¸</span>
                <span class="text-xs block">ë‘˜ëŸ¬ë³´ê¸°</span>
            </button>
            <button data-view="analysis" class="flex-1 nav-btn p-3 text-center text-gray-600">
                <span class="text-2xl">ğŸ“Š</span>
                <span class="text-xs block">ì‹œì„¸ë¶„ì„</span>
            </button>
        </nav>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const views = {
                search: document.getElementById('view-search'),
                browse: document.getElementById('view-browse'),
                analysis: document.getElementById('view-analysis'),
            };

            const navButtons = document.querySelectorAll('.nav-btn');
            let currentView = 'search';

            const platformInfo = {
                'ì¤‘ê³ ë‚˜ë¼': { url: 'https://cafe.naver.com/joonggonara.cafe', icon: 'https://i.namu.wiki/i/CsBfksyGOnBz_jjTsLVrYRlBtNrZvpEo5cWC-mFbcLloYy3gqAIiRalGuhdb2oPX5U4YvyYw7rP8dSEa2hE2sA.svg' },
                'ë²ˆê°œì¥í„°': { url: 'https://m.bunjang.co.kr', icon: 'https://i.namu.wiki/i/ldV2FGANNgeqCENBxNcRhWYRZZfldDEMMaGEUNMX_tt9_jzpCcSBa0pvaKIZYpJea0gB6gSh5S5aVqWGf0cxvw.webp' },
                'ë‹¹ê·¼ë§ˆì¼“': { url: 'https://www.daangn.com/kr', icon: 'https://lf-tt4b.tiktokcdn.com/obj/i18nblog/tt4b_cms/en-US/tipdilz7wysq-6MFgksIufbe05YAtrhLAd1.png' }
            };

            const mockData = {
                "rtx 4080": Array.from({ length: 15 }, (_, i) => ({ id: i, title: `[ë¯¸ê°œë´‰] MSI ì§€í¬ìŠ¤ RTX 4080 ê²Œì´ë° X íŠ¸ë¦¬ì˜¤ D6X 16GB íŠ¸ë¼ì´í”„ë¡œì ¸3 ${15 - i}`, price: 1250000 + i * 10000, platform: i % 3 === 0 ? 'ë²ˆê°œì¥í„°' : (i % 3 === 1 ? 'ì¤‘ê³ ë‚˜ë¼' : 'ë‹¹ê·¼ë§ˆì¼“'), date: new Date(new Date().setDate(new Date().getDate() - i * 2)), imageUrl: `https://sc04.alicdn.com/kf/H44e2a415211a42cab26eb6bebd3027bdg.jpg`, sold: i > 12, tag: 'ì „ìì œí’ˆ' })),
                "ì•„ì´íŒ¨ë“œ ì—ì–´ 5": Array.from({ length: 12 }, (_, i) => ({ id: i + 15, title: `ì•„ì´íŒ¨ë“œ ì—ì–´ 5ì„¸ëŒ€ 256GB ì™€ì´íŒŒì´ ìŠ¤í˜ì´ìŠ¤ ê·¸ë ˆì´ ${12 - i}`, price: 680000 + i * 5000, platform: i % 3 === 0 ? 'ë‹¹ê·¼ë§ˆì¼“' : (i % 3 === 1 ? 'ë²ˆê°œì¥í„°' : 'ì¤‘ê³ ë‚˜ë¼'), date: new Date(new Date().setDate(new Date().getDate() - i * 3)), imageUrl: `https://img.danawa.com/prod_img/500000/180/005/img/6005180_3.jpg?shrink=500:*&_v=20241216093952`, sold: i > 10, tag: 'ì „ìì œí’ˆ' })),
                "ë§¥ë¶ í”„ë¡œ": Array.from({ length: 10 }, (_, i) => ({ id: i + 27, title: `Macbook Pro 14 M3 Pro 18GB/512GB ìŠ¤í˜ì´ìŠ¤ ë¸”ë™ ${10 - i}`, price: 2500000 + i * 15000, platform: i % 3 === 0 ? 'ì¤‘ê³ ë‚˜ë¼' : (i % 3 === 1 ? 'ë‹¹ê·¼ë§ˆì¼“' : 'ë²ˆê°œì¥í„°'), date: new Date(new Date().setDate(new Date().getDate() - i)), imageUrl: `https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/mbp14-spaceblack-select-202310?wid=904&hei=840&fmt=jpeg&qlt=90&.v=1697230830200`, sold: i > 8, tag: 'ì „ìì œí’ˆ' })),
                "ë‹¤ì´ìŠ¨ ì²­ì†Œê¸°": Array.from({ length: 8 }, (_, i) => ({ id: i + 37, title: `ë‹¤ì´ìŠ¨ V15 ë””í…íŠ¸ ë¬´ì„  ì²­ì†Œê¸° ${8 - i}`, price: 850000 + i * 10000, platform: i % 3 === 0 ? 'ë‹¹ê·¼ë§ˆì¼“' : (i % 3 === 1 ? 'ì¤‘ê³ ë‚˜ë¼' : 'ë²ˆê°œì¥í„°'), date: new Date(new Date().setDate(new Date().getDate() - i * 4)), imageUrl: `https://image.dyson.co.kr/media/catalog/product/image/964478d/v15-detect-gold-front-facing.png`, sold: i > 6, tag: 'ê°€ì „ì œí’ˆ' })),
            };

            const mockAnalysis = {
                "rtx 4080": { summary: { newPrice: 1650000, avgPrice: 1285000, depreciation: 22.1 }, trend: { labels: ["4ì›”", "5ì›”", "6ì›”", "7ì›”"], data: [1350000, 1320000, 1290000, 1285000] }, speed: { labels: ["110ë§Œì›ëŒ€", "120ë§Œì›ëŒ€", "130ë§Œì›ëŒ€", "140ë§Œì›ëŒ€ ì´ìƒ"], data: [2, 4, 9, 15] } },
                "ì•„ì´íŒ¨ë“œ ì—ì–´ 5": { summary: { newPrice: 999000, avgPrice: 715000, depreciation: 28.4 }, trend: { labels: ["4ì›”", "5ì›”", "6ì›”", "7ì›”"], data: [780000, 750000, 730000, 715000] }, speed: { labels: ["60ë§Œì›ëŒ€", "70ë§Œì›ëŒ€", "80ë§Œì›ëŒ€"], data: [3, 7, 12] } },
                "ë§¥ë¶ í”„ë¡œ": { summary: { newPrice: 3290000, avgPrice: 2650000, depreciation: 19.4 }, trend: { labels: ["4ì›”", "5ì›”", "6ì›”", "7ì›”"], data: [2800000, 2750000, 2700000, 2650000] }, speed: { labels: ["250ë§Œì›ëŒ€", "260ë§Œì›ëŒ€", "270ë§Œì›ëŒ€ ì´ìƒ"], data: [5, 9, 14] } }
            };

            const searchInput = document.getElementById('searchInput');
            const searchBtn = document.getElementById('searchBtn');
            const resultsContainer = document.getElementById('results-container');
            const noResults = document.getElementById('no-results');
            const sortOptions = document.getElementById('sortOptions');
            const statusFilters = document.querySelectorAll('input[name="statusFilter"]');
            const minPriceInput = document.getElementById('minPrice');
            const maxPriceInput = document.getElementById('maxPrice');
            const dateFilter = document.getElementById('dateFilter');
            const popularKeywordsContainer = document.getElementById('popular-keywords');
            const platformFilterBtn = document.getElementById('platformFilterBtn');
            const platformFilterOptions = document.getElementById('platformFilterOptions');
            const platformCheckboxes = document.querySelectorAll('input[name="platform"]');

            const browseResultsContainer = document.getElementById('browse-results-container');
            const noBrowseResults = document.getElementById('no-browse-results');
            const categoryFiltersContainer = document.getElementById('category-filters');

            const analysisInput = document.getElementById('analysisInput');
            const analysisBtn = document.getElementById('analysisBtn');
            const analysisResults = document.getElementById('analysis-results');
            const noAnalysisResults = document.getElementById('no-analysis-results');

            let priceTrendChart, salesSpeedChart;

            function switchView(viewName) {
                currentView = viewName;
                Object.values(views).forEach(v => v.classList.add('hidden'));
                if (views[viewName]) views[viewName].classList.remove('hidden');
                navButtons.forEach(btn => {
                    btn.classList.toggle('nav-btn-active', btn.dataset.view === viewName);
                    btn.classList.toggle('text-gray-600', btn.dataset.view !== viewName);
                    btn.classList.toggle('hover:bg-blue-100', btn.dataset.view !== viewName);
                });
                if (viewName === 'browse') {
                    performBrowse();
                }
            }

            function formatPrice(price) { return `${price.toLocaleString('ko-KR')}ì›`; }

            function renderItems(container, items, noResultsElement) {
                container.innerHTML = '';
                noResultsElement.classList.toggle('hidden', items.length > 0);
                if (items.length === 0) return;

                items.forEach(item => {
                    const cardLink = document.createElement('a');
                    cardLink.href = platformInfo[item.platform]?.url || '#';
                    cardLink.target = '_blank';
                    cardLink.className = `block bg-white rounded-lg shadow-sm overflow-hidden transform hover:-translate-y-1 transition-transform duration-300 ${item.sold ? 'opacity-50' : ''}`;

                    cardLink.innerHTML = `
                        <div class="relative">
                            <img src="${item.imageUrl}" alt="${item.title}" class="w-full h-48 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/FFFFFF?text=Image+Not+Found';">
                            ${item.sold ? '<div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"><span class="text-white text-xl font-bold">ê±°ë˜ì™„ë£Œ</span></div>' : ''}
                        </div>
                        <div class="p-4 flex flex-col h-full">
                            <h3 class="font-bold text-md truncate">${item.title}</h3>
                            <div class="flex items-center gap-2 text-sm text-gray-600 my-2">
                                <img src="${platformInfo[item.platform]?.icon || ''}" class="w-4 h-4 object-contain">
                                <span>${item.platform}</span>
                            </div>
                            <p class="text-lg font-semibold text-blue-600">${formatPrice(item.price)}</p>
                            <div class="mt-auto pt-2 text-right text-sm text-gray-500">
                                <span>${item.date.toLocaleDateString('ko-KR')}</span>
                            </div>
                        </div>
                    `;
                    container.appendChild(cardLink);
                });
            }

            function performSearch() {
                const query = searchInput.value.toLowerCase();
                const statusFilterValue = document.querySelector('input[name="statusFilter"]:checked').value;
                const minPrice = parseFloat(minPriceInput.value) || 0;
                const maxPrice = parseFloat(maxPriceInput.value) || Infinity;
                const dateFilterDays = parseInt(dateFilter.value);
                const selectedPlatforms = Array.from(document.querySelectorAll('input[name="platform"]:checked')).map(cb => cb.value);

                let results = Object.values(mockData).flat();

                if (query) {
                    results = results.filter(item => item.title.toLowerCase().includes(query));
                }

                if (selectedPlatforms.length > 0) {
                    results = results.filter(item => selectedPlatforms.includes(item.platform));
                }

                if (statusFilterValue === 'available') {
                    results = results.filter(item => !item.sold);
                } else if (statusFilterValue === 'sold') {
                    results = results.filter(item => item.sold);
                }

                results = results.filter(item => item.price >= minPrice && item.price <= maxPrice);

                if (!isNaN(dateFilterDays)) {
                    const cutoffDate = new Date();
                    cutoffDate.setDate(cutoffDate.getDate() - dateFilterDays);
                    results = results.filter(item => item.date >= cutoffDate);
                }

                const sortValue = sortOptions.value;
                results.sort((a, b) => {
                    if (sortValue === 'latest') return b.date - a.date;
                    if (sortValue === 'price_asc') return a.price - b.price;
                    if (sortValue === 'price_desc') return b.price - a.price;
                });

                renderItems(resultsContainer, results, noResults);
            }

            function performBrowse() {
                const selectedCategory = document.querySelector('.category-btn-active')?.dataset.category || 'all';
                let results = Object.values(mockData).flat();

                if (selectedCategory !== 'all') {
                    results = results.filter(item => item.tag === selectedCategory);
                }

                results.sort((a, b) => b.date - a.date);

                renderItems(browseResultsContainer, results, noBrowseResults);
            }

            function performAnalysis() {
                const query = analysisInput.value.toLowerCase();
                const dataKey = Object.keys(mockAnalysis).find(key => query.includes(key.toLowerCase().split(" ")[0]));
                const data = dataKey ? mockAnalysis[dataKey] : null;

                analysisResults.classList.toggle('hidden', !data);
                noAnalysisResults.classList.toggle('hidden', data);

                if (data) {
                    renderAnalysis(data);
                } else {
                    noAnalysisResults.textContent = `'${query}'ì— ëŒ€í•œ ë¶„ì„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. 'RTX 4080', 'ì•„ì´íŒ¨ë“œ', 'ë§¥ë¶' ë“±ìœ¼ë¡œ ì‹œë„í•´ë³´ì„¸ìš”.`;
                }
            }

            function renderAnalysis(data) {
                const summaryContainer = document.getElementById('price-summary');
                summaryContainer.innerHTML = `
                    <div><p class="text-sm text-gray-500">ì‹ ì œí’ˆ í˜„ì¬ê°€</p><p class="text-2xl font-bold text-gray-800">${formatPrice(data.summary.newPrice)}</p></div>
                    <div><p class="text-sm text-gray-500">í˜„ì¬ ì¤‘ê³  ì‹œì„¸ (í‰ê· )</p><p class="text-3xl font-bold text-blue-600">${formatPrice(data.summary.avgPrice)}</p></div>
                    <div><p class="text-sm text-gray-500">ì˜ˆìƒ ê°ê°€ìœ¨</p><p class="text-2xl font-bold text-red-500">${data.summary.depreciation}%</p></div>`;

                if (priceTrendChart) priceTrendChart.destroy();
                priceTrendChart = new Chart(document.getElementById('priceTrendChart'), {
                    type: 'line',
                    data: { labels: data.trend.labels, datasets: [{ label: 'í‰ê·  ê±°ë˜ê°€', data: data.trend.data, borderColor: '#3B82F6', backgroundColor: 'rgba(59, 130, 246, 0.1)', fill: true, tension: 0.3 }] },
                    options: { responsive: true, maintainAspectRatio: false }
                });

                if (salesSpeedChart) salesSpeedChart.destroy();
                salesSpeedChart = new Chart(document.getElementById('salesSpeedChart'), {
                    type: 'bar',
                    data: { labels: data.speed.labels, datasets: [{ label: 'í‰ê·  ì†Œìš” ê¸°ê°„ (ì¼)', data: data.speed.data, backgroundColor: ['#93C5FD', '#60A5FA', '#3B82F6', '#2563EB'], borderRadius: 5 }] },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
                });
            }

            function renderPopularKeywords() {
                const keywords = ["RTX 4080", "ì•„ì´íŒ¨ë“œ", "ë§¥ë¶ í”„ë¡œ", "ë‹¤ì´ìŠ¨ ì²­ì†Œê¸°"];
                popularKeywordsContainer.innerHTML = '<span class="text-sm font-semibold text-gray-600">ì¸ê¸° ê²€ìƒ‰ì–´:</span>';
                keywords.forEach(keyword => {
                    const btn = document.createElement('button');
                    btn.className = 'keyword-btn text-sm bg-blue-100 text-blue-800 py-1 px-3 rounded-full hover:bg-blue-200';
                    btn.textContent = keyword;
                    btn.onclick = () => { searchInput.value = keyword; performSearch(); };
                    popularKeywordsContainer.appendChild(btn);
                });
            }

            function renderCategoryFilters() {
                const categories = ['all', 'ì „ìì œí’ˆ', 'ê°€ì „ì œí’ˆ'];
                categoryFiltersContainer.innerHTML = '';
                categories.forEach(category => {
                    const btn = document.createElement('button');
                    btn.className = 'category-btn text-md font-semibold border py-2 px-4 rounded-full';
                    btn.textContent = category === 'all' ? 'ì „ì²´' : category;
                    btn.dataset.category = category;
                    if (category === 'all') {
                        btn.classList.add('category-btn-active', 'bg-blue-600', 'text-white');
                    } else {
                        btn.classList.add('bg-white', 'text-gray-700');
                    }
                    btn.onclick = () => {
                        document.querySelectorAll('.category-btn').forEach(b => {
                            b.classList.remove('category-btn-active', 'bg-blue-600', 'text-white');
                            b.classList.add('bg-white', 'text-gray-700');
                        });
                        btn.classList.remove('bg-white', 'text-gray-700');
                        btn.classList.add('category-btn-active', 'bg-blue-600', 'text-white');
                        performBrowse();
                    };
                    categoryFiltersContainer.appendChild(btn);
                });
            }

            function updatePlatformFilterText() {
                const selected = Array.from(document.querySelectorAll('input[name="platform"]:checked')).map(cb => cb.parentElement.textContent.trim());
                const textElement = document.getElementById('platformFilterText');
                if (selected.length === platformCheckboxes.length) {
                    textElement.textContent = 'ì „ì²´';
                } else if (selected.length > 0) {
                    textElement.textContent = selected.join(', ');
                } else {
                    textElement.textContent = 'ì„ íƒëœ í”Œë«í¼ ì—†ìŒ';
                }
            }

            platformFilterBtn.addEventListener('click', () => {
                platformFilterOptions.classList.toggle('hidden');
            });

            document.addEventListener('click', (e) => {
                if (!platformFilterBtn.contains(e.target) && !platformFilterOptions.contains(e.target)) {
                    platformFilterOptions.classList.add('hidden');
                }
            });

            const allFilterElements = [sortOptions, minPriceInput, maxPriceInput, dateFilter, ...statusFilters, ...platformCheckboxes];
            allFilterElements.forEach(el => el.addEventListener('change', performSearch));

            platformCheckboxes.forEach(cb => cb.addEventListener('change', updatePlatformFilterText));

            searchBtn.addEventListener('click', performSearch);
            searchInput.addEventListener('keyup', e => { if (e.key === 'Enter') performSearch() });
            analysisBtn.addEventListener('click', performAnalysis);
            analysisInput.addEventListener('keyup', e => { if (e.key === 'Enter') performAnalysis() });
            navButtons.forEach(btn => btn.addEventListener('click', () => switchView(btn.dataset.view)));

            switchView('search');
            renderPopularKeywords();
            renderCategoryFilters();
            performSearch();
            updatePlatformFilterText();
        });
    </script>
</body>

</html>